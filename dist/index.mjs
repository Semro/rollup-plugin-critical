import*as n from"path";import{generate as u}from"critical";var g="_critical.min.css",h={inline:!1,extract:!1,width:1200,height:1200,penthouse:{blockJSRequests:!1}};function p(i,r){return{name:"critical",async writeBundle(o,f){let c=[];for(let t of Object.values(f))if(t.type==="asset"&&t.fileName.endsWith(".css")){let a=n.join(o.dir||"",t.fileName);c.push(a)}if(!!c.length)for(let t of i.criticalPages){let a=i.criticalBase,s=i.criticalUrl+t.uri,l=i.criticalConfig&&i.criticalConfig.inline==!0?t.template+".html":t.template+g,m=Object.assign({css:c},h,{base:a,src:s,target:l},i.criticalConfig);console.log(`Generating critical CSS from ${s} to ${l}`),await u(m,e=>{e&&console.error(e),r&&r(e)})}}}}var P=p;export{P as default};
//# sourceMappingURL=index.mjs.map