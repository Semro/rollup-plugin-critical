import*as n from"path";import{generate as g}from"critical";var u="_critical.min.css",h={inline:!1,extract:!1,width:1200,height:1200,penthouse:{blockJSRequests:!1}};function C(t,r){return{name:"critical",async writeBundle(o,f){let c=[];for(let i of Object.values(f))if(i.type==="asset"&&i.fileName.endsWith(".css")){let a=n.join(o.dir||"",i.fileName);c.push(a)}if(!!c.length)for(let i of t.criticalPages){let a=t.criticalBase,s=t.criticalUrl+i.uri,l=t.criticalConfig&&t.criticalConfig.inline==!0?i.template+".html":i.template+u,m=Object.assign({css:c},h,{base:a,src:s,target:l},t.criticalConfig);console.log(`Generating critical CSS from ${s} to ${l}`),await g(m,e=>{e&&console.error(e),r&&r(e)})}}}}export{C as PluginCritical};
//# sourceMappingURL=index.mjs.map