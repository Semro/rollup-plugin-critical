"use strict";var p=Object.create;var s=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var b=(t,i)=>{for(var c in i)s(t,c,{get:i[c],enumerable:!0})},m=(t,i,c,r)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of P(i))!S.call(t,a)&&a!==c&&s(t,a,{get:()=>i[a],enumerable:!(r=C(i,a))||r.enumerable});return t};var j=(t,i,c)=>(c=t!=null?p(d(t)):{},m(i||!t||!t.__esModule?s(c,"default",{value:t,enumerable:!0}):c,t)),w=t=>m(s({},"__esModule",{value:!0}),t);var N={};b(N,{default:()=>k});module.exports=w(N);var u=j(require("path")),g=require("critical"),x="_critical.min.css",y={inline:!1,extract:!1,width:1200,height:1200,penthouse:{blockJSRequests:!1}};function B(t,i){return{name:"critical",async writeBundle(c,r){let a=[];for(let e of Object.values(r))if(e.type==="asset"&&e.fileName.endsWith(".css")){let l=u.join(c.dir||"",e.fileName);a.push(l)}if(!!a.length)for(let e of t.criticalPages){let l=t.criticalBase,o=t.criticalUrl+e.uri,f=t.criticalConfig&&t.criticalConfig.inline==!0?e.template+".html":e.template+x,h=Object.assign({css:a},y,{base:l,src:o,target:f},t.criticalConfig);console.log(`Generating critical CSS from ${o} to ${f}`),await(0,g.generate)(h,n=>{n&&console.error(n),i&&i(n)})}}}}var k=B;0&&(module.exports={});
//# sourceMappingURL=index.js.map